{% set images = [] %}
{% for image in data %}
    {% set key = image.caption ? image.caption : image.file.name ~ (images.key is defined ? (' - '~image.file.media) : '') %}
    {% set images = images|merge({(key): image.url}) %}
{% endfor %}

{% apply unprose %}

{% if (needBlockWrapper(data)) %}<div{{ blockWrapperAttr(data) }}>{% endif %}

{% include view('/component/images_gallery.html.twig') with {'images': images} only %}

{% if (needBlockWrapper(data)) %}</div>{% endif %}

{% endapply %}
